{% extends "layout.html" %}

{% load boilerplate core_tags i18n %}

{% block title %}{{ object_list|queryset_model_name_plural }}{% endblock title %}

{% block breadcrumb %}
    <ol class="breadcrumb">
        <li><a href="{% site_url %}">{% trans "Home" %}</a></li>
        <li><a href="{% url 'core:company_detail' %}">{{ company }}</a></li>
        <li class="active"><strong>{% trans "Users" %}</strong></li>
    </ol>
{% endblock breadcrumb %}

{% block page_header %}
    <h2>
        {% trans "Users" %}
        {% include "common/options-buttons.html" %}
    </h2>
{% endblock page_header %}

{% block page_actions %}
    <a role="button" class="btn btn-size-default btn-success" href="{% url 'core:user_add' %}">
        <span class="glyphicon glyphicon-plus"></span>
        {% trans "Add" %}
    </a>
{% endblock %}

{% block content %}
    <div class="tabs-container">
        {% include "core/common/tabs.html" %}

        <div class="tab-content">
            <div role="tabpanel" class="tab-pane active">
                <div class="panel-body table-responsive">
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th>{% trans "Username" %}</th>
                                <th>{% trans "First name" %}</th>
                                <th>{% trans "Last name" %}</th>
                                <th>{% trans "Email" %}</th>
                                <th class="text-center">{% trans "Active" %}</th>
                                <th class="text-right">{% trans "Options" %}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in object_list %}
                                <tr>
                                    <td>{{ item.user.username }}</td>
                                    <td>{{ item.user.first_name }}</td>
                                    <td>{{ item.user.last_name }}</td>
                                    <td>{{ item.user.email }}</td>
                                    <td class="text-center"><span class="glyphicon glyphicon-{{ item.is_active|yesno:'ok,remove' }} text-{{ item.is_active|yesno:'success,remove' }}"></span></td>
                                    <td class="text-right">
                                        {% if item.user != request.user %}
                                            <a role="button" class="btn btn-xs btn-info" href="{% url 'core:user_permissions' item.pk %}">
                                                <span class="glyphicon glyphicon-pencil"></span>
                                                {% trans "Permissions" %}
                                            </a>
                                            <a role="button" class="btn btn-xs btn-success" href="{% url 'core:user_change' item.user.pk %}">
                                                <span class="glyphicon glyphicon-pencil"></span>
                                                {% trans "Change" %}
                                            </a>
                                            <a role="button" class="btn btn-xs btn-danger" href="{% url 'core:user_remove' item.user.pk %}">
                                                <span class="glyphicon glyphicon-trash"></span>
                                                {% trans "Remove" %}
                                            </a>
                                        {% endif %}
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}
