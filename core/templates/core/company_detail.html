{% extends "layout.html" %}

{% load boilerplate core_tags i18n %}

{% block title %}{{ object }}{% endblock title %}

{% block breadcrumb %}
    <ol class="breadcrumb">
        <li><a href="{% site_url %}">{% trans "Home" %}</a></li>
        <li class="active">
            {{ object }}
        </li>
    </ol>
{% endblock breadcrumb %}

{% block page_header %}
    <div class="page-header">
        <h1>
            {{ object }}
            <a role="button" class="btn btn-xs btn-success" href="{% url 'core:company_change' %}">
                <span class="glyphicon glyphicon-pencil"></span>
                {% trans "Change" %}
            </a>
        </h1>
    </div>
{% endblock page_header %}

{% block content %}
    <div class="panel panel-default">
      <div class="panel-heading">
          <div class="pull-right">
              <a role="button" class="btn btn-xs btn-primary" href="{% url 'core:invite_add' %}">
                <span class="glyphicon glyphicon-plus"></span>
                {% trans "Add" %}
              </a>
          </div>
        <h3 class="panel-title">{% trans "Invites" %}</h3>
      </div>
      <div class="table-responsive">
          <table class="table table-striped table-hover">
              <thead>
                  <tr>
                      <th>{% trans "Name" %}</th>
                      <th>{% trans "Email" %}</th>
                      <th>{% trans "Creation date" %}</th>
                      <th class="text-center">{% trans "Active" %}</th>
                      <th class="text-right">{% trans "Options" %}</th>
                  </tr>
              </thead>
              <tbody>
                  {% for invite in object.invites.all %}
                      <tr>
                          <td>{{ invite.name }}</td>
                          <td>{{ invite.email }}</td>
                          <td>{{ invite.date_creation }}</td>
                          <td class="text-center">
                              <span class="glyphicon glyphicon-{{ invite.is_active|yesno:'ok,remove' }} text-{{ invite.is_active|yesno:'success,danger' }}"></span>
                          </td>
                          <td class="text-right">
                              {% include "common/options-buttons.html" with object=invite %}
                          </td>
                      </tr>
                  {% empty %}
                        <tr>
                            <td colspan="5" class="text-muted text-center">
                                {% trans "No information." %}
                            </td>
                        </tr>
                  {% endfor %}
              </tbody>
          </table>
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">{% trans "Users" %}</h3>
      </div>
      <div class="table-responsive">
          <table class="table table-striped table-hover">
              <thead>
                  <tr>
                      <th>{% trans "Username" %}</th>
                      <th>{% trans "First name" %}</th>
                      <th>{% trans "Last name" %}</th>
                      <th>{% trans "Email" %}</th>
                      <th class="text-right">{% trans "Options" %}</th>
                  </tr>
              </thead>
              <tbody>
                  {% for item in object.users_all.all %}
                      <tr>
                          <td>{{ item.user.username }}</td>
                          <td>{{ item.user.first_name }}</td>
                          <td>{{ item.user.last_name }}</td>
                          <td>{{ item.user.email }}</td>
                          <td class="text-right">
                              {% if item.user != request.user %}
                                  <a role="button" class="btn btn-xs btn-danger" href="{% url 'core:user_remove' item.pk %}">
                                      <span class="glyphicon glyphicon-trash"></span>
                                      {% trans "Remove" %}
                                  </a>
                              {% endif %}
                          </td>
                      </tr>
                  {% endfor %}
              </tbody>
          </table>
      </div>
    </div>
{% endblock content %}
