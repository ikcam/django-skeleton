{% load boilerplate bootstrap3 i18n %}

<form {% if form_id %}id="{{ form_id }}"{% endif %} class="form-horizontal" method="POST" action="{{ form_action }}" enctype="multipart/form-data" role="form">
    {% csrf_token %}

    {% if form %}
        <div class="ibox float-e-margins">
            {% if extra_form_list or formset_list %}
                <div class="ibox-title">
                    {% if form_title %}
                        <h5>{{ form_title }}</h5>
                    {% else %}
                        <h5>{{ form|form_model_name }}</h5>
                    {% endif %}
                </div>
            {% endif %}
            <div class="ibox-content">
                {% bootstrap_form_errors form type='non_fields' layout='horizontal' %}

                {% bootstrap_form form layout="horizontal" %}

                {% if not extra_form_list and not formset_list %}
                    {% include 'common/form-buttons.html' %}
                {% endif %}
            </div>
        </div>

        {% for extra_form in extra_form_list  %}
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>{{ extra_form|form_model_name }}</h5>
                </div>
                <div class="ibox-content">
                    {% bootstrap_form_errors extra_form type='non_fields' layout='horizontal' %}

                    {% bootstrap_form extra_form layout="horizontal" %}

                    {% if forloop.last and not formset_list %}
                        {% include 'common/form-buttons.html' %}
                    {% endif %}
                </div>
            </div>
        {% endfor %}

        {% for formset in formset_list  %}
            {% include 'common/formset.html' with formset=formset %}
         {% endfor %}
    {% else %}
        <div class="ibox float-e-margins">
            <div class="ibox-content">
                {% blocktrans with model_name=object|model_name %}
                <p>Are you sure you want to delete the <b>{{ model_name }}: "{{ object }}"</b>?</p>
                <p>After confirm you <b>won't be able to undo this action</b>. Be careful.</p>
                <p>Click on "<b>Delete</b>" to confirm this action or click on "<b>Back</b>" to get back.</p>
                {% endblocktrans %}

                {% trans 'You will also delete the following elements:' %}
                <ul>{{ object|get_deleted_objects|unordered_list }}</ul>

                <div class="row">
        			<div class="col-xs-6 text-center">
        				<button type="submit" class="btn btn-danger"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> {% trans 'Delete' %}</button>
        			</div>
        			<div class="col-xs-6 text-center">
        				<a class="btn btn-default" href="javascript:history.back(-1)"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> {% trans 'Cancel' %}</a>
        			</div>
        		</div>
            </div>
        </div>
    {% endif %}
</form>
